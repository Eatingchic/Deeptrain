<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
    <link href="https://lib.baomitu.com/boxicons/2.1.4/css/boxicons.css" rel="stylesheet">
    <link href="https://lib.baomitu.com/font-awesome/6.2.1/css/all.min.css" rel="stylesheet">
    <link href="{% static 'css/files/upload.css' %}" rel="stylesheet">
</head>
<body>
<form id="fileform" class="modal">
    {% csrf_token %}
	<div class="modal-header"><div class="modal-logo"><span class="logo-circle"><i class="fa fa-solid fa-file-arrow-up"></i></span></div><button class="btn-close"><i class="fa-solid fa-upload"></i></button></div>
	<div class="modal-body">
		<h2 class="modal-title">Upload</h2>
		<p class="modal-description">Attach the file below</p>
        <label for="id_{{ form.files.name }}" class="upload-area">
            <span class="upload-area-icon"><i class='bx bxs-cloud-upload'></i></span>
			<span class="upload-area-title" id="area">Drag a file here to upload.</span>
			<span class="upload-area-description" id="desc">Alternatively, you can select a file by <br><strong>clicking here</strong></span>
        </label>
		{{ form.files }}
	</div>
    <div class="message-line">
        {% if error_code %}
            <div class="error"><i class="fa fa-solid fa-circle-xmark"></i>&nbsp;{{ error_code }}</div>
        {% elif name and link %}
            <div class="success"><i class="fa fa-solid fa-circle-check"></i>&nbsp;Successfully upload file {{ name }}</div>
            <a href="{{ link }}" class="link"><i class="fa fa-solid fa-circle-chevron-right"></i>&nbsp; Download the submitted file</a>
        {% endif %}
    </div>

	<div class="modal-footer">
		<div class="btn-secondary" id="cancel-file">Cancel</div>
        <div class="btn-primary" id="commit">
            <span id="commit-span">Upload File</span>
            <svg id="loading" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="20px" viewBox="0 0 30 30" style="stroke: white;" xml:space="preserve"><rect x="0" y="13" width="4" height="5" fill="white"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="10" y="13" width="4" height="5" fill="white"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s" repeatCount="indefinite"></animate></rect><rect x="20" y="13" width="4" height="5" fill="white"><animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate><animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s" repeatCount="indefinite"></animate></rect></svg>
        </div>
    </div>
</form>
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="{% static 'js/file.js' %}"></script>
<script src="{% static 'js/files/upload.js' %}"></script>
<script>
    init (
        "#id_{{ form.files.name }}",
        {{ max_size }},
        {{ max_name }},
        "{% url 'files:upload' %}",
    );

    input.onchange = updateInput;
</script>
</body>
</html>